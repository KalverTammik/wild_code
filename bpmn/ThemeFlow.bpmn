<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" xmlns:color="http://www.omg.org/spec/BPMN/non-normative/color/1.0" id="ThemeFlowDefinitions" targetNamespace="http://wild_code/ThemeFlow">
  <bpmn:collaboration id="Collaboration_1d26rso">
    <bpmn:participant id="Participant_0m93hj0" name="Theme Managment" processRef="ThemeFlow" />
    <bpmn:participant id="Participant_1mzulld" name="QGIS User" />
    <bpmn:messageFlow id="Flow_0kylnae" sourceRef="Participant_1mzulld" targetRef="Start_UserClicksThemeToggle" />
    <bpmn:textAnnotation id="Annotation_QssLoading">
      <bpmn:text>QSS is always loaded via ThemeManager._read_qss() from StylePaths.DARK or StylePaths.LIGHT using QssPaths; widgets, modules and dialogs must never load QSS directly.</bpmn:text>
    </bpmn:textAnnotation>
    <bpmn:textAnnotation id="Annotation_ModuleRetheme">
      <bpmn:text>Each module exposes a retheme_* or retheme() method that internally calls ThemeManager.apply_module_style(self, [QssPaths.*]) so live theme switching updates all dynamic content.</bpmn:text>
    </bpmn:textAnnotation>
  </bpmn:collaboration>
  <bpmn:process id="ThemeFlow" name="WildCode Plugin Theme Flow" isExecutable="true">
    <bpmn:laneSet id="LaneSet_ThemeFlowActors">
      <bpmn:lane id="Lane_StyleResources" name="Style &#38; Persistence Access">
        <bpmn:flowNodeRef>Task_SR_LoadQssFiles</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_SR_LoadNewThemeQss</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_ThemeManager" name="ThemeManager Engine">
        <bpmn:flowNodeRef>Task_TM_ResolveEffectiveTheme</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_TM_ApplyThemeForWidget</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_TM_UpdateHeaderIcons</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_TM_SelectNewTheme</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_TM_ApplyNewThemeToMainDialog</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_TM_UpdateHeaderIconsNewTheme</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_TM_SaveThemeSetting</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_MainDialog" name="Main Dialog / Modules">
        <bpmn:flowNodeRef>Start_InitWidget</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_MainDialog_CallSetInitialTheme</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>End_WidgetThemed</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>End_ThemeToggled</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Task_MainDialog_HandleThemeToggle</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_QGISUser">
        <bpmn:flowNodeRef>Task_MainDialog_RethemeModules</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Start_UserClicksThemeToggle</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:dataStoreReference id="DataStore_QssThemeFiles" name="QSS Theme Files" />
    <bpmn:dataStoreReference id="DataStore_QgsSettingsTheme" name="QgsSettings: wild_code/theme" />
    <bpmn:startEvent id="Start_InitWidget" name="Widget Created (UI Built)">
      <bpmn:outgoing>Flow_Init_Start_To_CallSetInitialTheme</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:scriptTask id="Task_MainDialog_CallSetInitialTheme" name="Call ThemeManager.set_initial_theme(widget, ...)">
      <bpmn:documentation>Implementation: main dialogs and popups call ThemeManager.set_initial_theme(self, switch_button, logout_button, qss_files) after building the UI.</bpmn:documentation>
      <bpmn:incoming>Flow_Init_Start_To_CallSetInitialTheme</bpmn:incoming>
      <bpmn:outgoing>Flow_Init_CallSetInitialTheme_To_TM_ResolveEffectiveTheme</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="Task_TM_ResolveEffectiveTheme" name="Resolve Effective Theme (QgsSettings + System)">
      <bpmn:documentation>Implementation: ThemeManager.effective_theme() reads wild_code/theme from QgsSettings and, if set to SYSTEM, inspects QApplication palette to decide between light/dark.</bpmn:documentation>
      <bpmn:incoming>Flow_Init_CallSetInitialTheme_To_TM_ResolveEffectiveTheme</bpmn:incoming>
      <bpmn:outgoing>Flow_Init_TM_ResolveEffectiveTheme_To_TM_ApplyThemeForWidget</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="Task_TM_ApplyThemeForWidget" name="Apply Theme to Widget (QSS)">
      <bpmn:documentation>Implementation: ThemeManager._apply_theme_for(widget, theme, qss_files) resolves StylePaths.DARK/LIGHT, then calls ThemeManager.apply_theme(widget, theme_dir, qss_files).</bpmn:documentation>
      <bpmn:incoming>Flow_Init_TM_ResolveEffectiveTheme_To_TM_ApplyThemeForWidget</bpmn:incoming>
      <bpmn:outgoing>Flow_Init_TM_ApplyThemeForWidget_To_SR_LoadQssFiles</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="Task_SR_LoadQssFiles" name="Load QSS Files for Current Theme">
      <bpmn:documentation>Implementation: ThemeManager._read_qss(theme_dir, qss_files) reads QSS files (QssPaths) under styles/Dark or styles/Light and concatenates them into a single stylesheet string. If a file is missing or unreadable, apply_theme() catches the exception and the widget keeps its previous style. TODO: Define explicit error handling path if missing QSS should surface visibly.</bpmn:documentation>
      <bpmn:incoming>Flow_1akomev</bpmn:incoming>
      <bpmn:outgoing>Flow_Init_SR_LoadQssFiles_To_TM_UpdateHeaderIcons</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="Task_TM_UpdateHeaderIcons" name="Update Header Icons (Switch / Logout)">
      <bpmn:documentation>Implementation: ThemeManager._update_header_icons(theme, switch_button, logout_button) sets theme-aware icons for the theme switch button and logout button using ResourcePaths and resolve_icon_path().</bpmn:documentation>
      <bpmn:incoming>Flow_Init_SR_LoadQssFiles_To_TM_UpdateHeaderIcons</bpmn:incoming>
      <bpmn:outgoing>Flow_Init_TM_UpdateHeaderIcons_To_End_WidgetThemed</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:endEvent id="End_WidgetThemed" name="Widget Styled with Initial Theme">
      <bpmn:incoming>Flow_Init_TM_UpdateHeaderIcons_To_End_WidgetThemed</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:scriptTask id="Task_TM_SelectNewTheme" name="Compute New Theme (Light  Dark)">
      <bpmn:documentation>Implementation: ThemeManager.toggle_theme() computes new_theme = DARK if theme_now == LIGHT else LIGHT, based on current_theme or effective_theme().</bpmn:documentation>
      <bpmn:incoming>Flow_Toggle_MainDialog_HandleThemeToggle_To_TM_SelectNewTheme</bpmn:incoming>
      <bpmn:outgoing>Flow_Toggle_TM_SelectNewTheme_To_TM_ApplyNewThemeToMainDialog</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="Task_TM_ApplyNewThemeToMainDialog" name="Apply New Theme to Main Dialog (QSS)">
      <bpmn:documentation>Implementation: ThemeManager._apply_theme_for(mainDialog, new_theme, qss_files) re-applies theme-specific QSS to the main plugin window when the user toggles the theme.</bpmn:documentation>
      <bpmn:incoming>Flow_Toggle_TM_SelectNewTheme_To_TM_ApplyNewThemeToMainDialog</bpmn:incoming>
      <bpmn:incoming>Flow_Init_TM_ApplyThemeForWidget_To_SR_LoadQssFiles</bpmn:incoming>
      <bpmn:outgoing>Flow_Toggle_TM_ApplyNewThemeToMainDialog_To_SR_LoadNewThemeQss</bpmn:outgoing>
      <bpmn:outgoing>Flow_1akomev</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="Task_SR_LoadNewThemeQss" name="Load QSS Files from New Theme Directory">
      <bpmn:documentation>Implementation: ThemeManager._read_qss(theme_dir_for_new_theme, qss_files) loads the same QSS set (main, combobox, sidebar, header, etc.) but from the Dark or Light directory according to new_theme.</bpmn:documentation>
      <bpmn:incoming>Flow_Toggle_TM_ApplyNewThemeToMainDialog_To_SR_LoadNewThemeQss</bpmn:incoming>
      <bpmn:outgoing>Flow_Toggle_SR_LoadNewThemeQss_To_TM_UpdateHeaderIconsNewTheme</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="Task_TM_UpdateHeaderIconsNewTheme" name="Update Header Icons for New Theme">
      <bpmn:documentation>Implementation: ThemeManager._update_header_icons(new_theme, switch_button, logout_button) flips the switch button icon (lightness/darkness) and adjusts logout icon brightness.</bpmn:documentation>
      <bpmn:incoming>Flow_Toggle_SR_LoadNewThemeQss_To_TM_UpdateHeaderIconsNewTheme</bpmn:incoming>
      <bpmn:outgoing>Flow_Toggle_TM_UpdateHeaderIconsNewTheme_To_TM_SaveThemeSetting</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="Task_TM_SaveThemeSetting" name="Persist Theme Choice to QgsSettings">
      <bpmn:documentation>Implementation: ThemeManager.save_theme_setting(new_theme) writes wild_code/theme so future sessions and dialogs start with the chosen theme. TODO: Decide how to surface a QgsSettings write failure (log only vs. user-visible warning).</bpmn:documentation>
      <bpmn:incoming>Flow_Toggle_TM_UpdateHeaderIconsNewTheme_To_TM_SaveThemeSetting</bpmn:incoming>
      <bpmn:outgoing>Flow_Toggle_TM_SaveThemeSetting_To_MainDialog_RethemeModules</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:scriptTask id="Task_MainDialog_RethemeModules" name="Retheme Modules &#38; Widgets">
      <bpmn:documentation>Implementation: PluginDialog.apply_theme_toggle() iterates known module targets (header, sidebar, projects, contracts, property, settings, footer) and calls their retheme_* or retheme() methods, which in turn use ThemeManager.apply_module_style(...) with appropriate QssPaths.</bpmn:documentation>
      <bpmn:incoming>Flow_Toggle_TM_SaveThemeSetting_To_MainDialog_RethemeModules</bpmn:incoming>
      <bpmn:outgoing>Flow_Toggle_MainDialog_RethemeModules_To_End_ThemeToggled</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:endEvent id="End_ThemeToggled" name="All Visible Widgets Re-Styled with New Theme">
      <bpmn:incoming>Flow_Toggle_MainDialog_RethemeModules_To_End_ThemeToggled</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:sequenceFlow id="Flow_Init_Start_To_CallSetInitialTheme" sourceRef="Start_InitWidget" targetRef="Task_MainDialog_CallSetInitialTheme" />
    <bpmn:sequenceFlow id="Flow_Init_CallSetInitialTheme_To_TM_ResolveEffectiveTheme" sourceRef="Task_MainDialog_CallSetInitialTheme" targetRef="Task_TM_ResolveEffectiveTheme" />
    <bpmn:sequenceFlow id="Flow_Init_TM_ResolveEffectiveTheme_To_TM_ApplyThemeForWidget" sourceRef="Task_TM_ResolveEffectiveTheme" targetRef="Task_TM_ApplyThemeForWidget" />
    <bpmn:sequenceFlow id="Flow_Init_TM_ApplyThemeForWidget_To_SR_LoadQssFiles" sourceRef="Task_TM_ApplyThemeForWidget" targetRef="Task_TM_ApplyNewThemeToMainDialog" />
    <bpmn:sequenceFlow id="Flow_1akomev" sourceRef="Task_TM_ApplyNewThemeToMainDialog" targetRef="Task_SR_LoadQssFiles" />
    <bpmn:sequenceFlow id="Flow_Init_SR_LoadQssFiles_To_TM_UpdateHeaderIcons" sourceRef="Task_SR_LoadQssFiles" targetRef="Task_TM_UpdateHeaderIcons" />
    <bpmn:sequenceFlow id="Flow_Init_TM_UpdateHeaderIcons_To_End_WidgetThemed" sourceRef="Task_TM_UpdateHeaderIcons" targetRef="End_WidgetThemed" />
    <bpmn:sequenceFlow id="Flow_Toggle_MainDialog_HandleThemeToggle_To_TM_SelectNewTheme" sourceRef="Task_MainDialog_HandleThemeToggle" targetRef="Task_TM_SelectNewTheme" />
    <bpmn:sequenceFlow id="Flow_Toggle_TM_SelectNewTheme_To_TM_ApplyNewThemeToMainDialog" sourceRef="Task_TM_SelectNewTheme" targetRef="Task_TM_ApplyNewThemeToMainDialog" />
    <bpmn:sequenceFlow id="Flow_Toggle_TM_ApplyNewThemeToMainDialog_To_SR_LoadNewThemeQss" sourceRef="Task_TM_ApplyNewThemeToMainDialog" targetRef="Task_SR_LoadNewThemeQss" />
    <bpmn:sequenceFlow id="Flow_Toggle_SR_LoadNewThemeQss_To_TM_UpdateHeaderIconsNewTheme" sourceRef="Task_SR_LoadNewThemeQss" targetRef="Task_TM_UpdateHeaderIconsNewTheme" />
    <bpmn:sequenceFlow id="Flow_Toggle_TM_UpdateHeaderIconsNewTheme_To_TM_SaveThemeSetting" sourceRef="Task_TM_UpdateHeaderIconsNewTheme" targetRef="Task_TM_SaveThemeSetting" />
    <bpmn:sequenceFlow id="Flow_Toggle_TM_SaveThemeSetting_To_MainDialog_RethemeModules" sourceRef="Task_TM_SaveThemeSetting" targetRef="Task_MainDialog_RethemeModules" />
    <bpmn:sequenceFlow id="Flow_Toggle_MainDialog_RethemeModules_To_End_ThemeToggled" sourceRef="Task_MainDialog_RethemeModules" targetRef="End_ThemeToggled" />
    <bpmn:scriptTask id="Task_MainDialog_HandleThemeToggle" name="PluginDialog.apply_theme_toggle()">
      <bpmn:documentation>Implementation: PluginDialog.apply_theme_toggle() prepares qss_files (main, sidebar, header, etc.) and calls ThemeManager.toggle_theme(self, current_theme, switchButton, logoutButton, qss_files), then triggers per-module retheme_* methods.</bpmn:documentation>
      <bpmn:incoming>Flow_13v07up</bpmn:incoming>
      <bpmn:outgoing>Flow_Toggle_MainDialog_HandleThemeToggle_To_TM_SelectNewTheme</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:sequenceFlow id="Flow_13v07up" sourceRef="Start_UserClicksThemeToggle" targetRef="Task_MainDialog_HandleThemeToggle" />
    <bpmn:startEvent id="Start_UserClicksThemeToggle" name="User Clicks Theme Switch Button">
      <bpmn:outgoing>Flow_13v07up</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:association id="Association_QssLoading_To_Task_SR_LoadQssFiles" sourceRef="Annotation_QssLoading" targetRef="Task_SR_LoadQssFiles" />
    <bpmn:association id="Association_ModuleRetheme_To_Task_MainDialog_RethemeModules" sourceRef="Annotation_ModuleRetheme" targetRef="Task_MainDialog_RethemeModules" />
  </bpmn:process>
  <bpmndi:BPMNDiagram id="Diagram_ThemeFlow">
    <bpmndi:BPMNPlane id="Plane_ThemeFlow" bpmnElement="Collaboration_1d26rso">
      <bpmndi:BPMNShape id="Participant_0m93hj0_di" bpmnElement="Participant_0m93hj0" isHorizontal="true">
        <dc:Bounds x="-90" y="-40" width="1990" height="880" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Lane_StyleResources" bpmnElement="Lane_StyleResources" isHorizontal="true">
        <dc:Bounds x="-40" y="620" width="1920" height="200" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Lane_ThemeManager" bpmnElement="Lane_ThemeManager" isHorizontal="true">
        <dc:Bounds x="-40" y="340" width="1920" height="280" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Lane_MainDialog" bpmnElement="Lane_MainDialog" isHorizontal="true">
        <dc:Bounds x="-40" y="180" width="1920" height="160" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Lane_QGISUser" bpmnElement="Lane_QGISUser" isHorizontal="true">
        <dc:Bounds x="-40" y="-20" width="1920" height="200" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Start_InitWidget" bpmnElement="Start_InitWidget" bioc:stroke="#205022" bioc:fill="#c8e6c9" color:background-color="#c8e6c9" color:border-color="#205022">
        <dc:Bounds x="32" y="228" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="12" y="264" width="76" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_MainDialog_CallSetInitialTheme" bpmnElement="Task_MainDialog_CallSetInitialTheme" bioc:stroke="#205022" bioc:fill="#e8f5e9" color:background-color="#e8f5e9" color:border-color="#205022">
        <dc:Bounds x="160" y="216" width="260" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_TM_ResolveEffectiveTheme" bpmnElement="Task_TM_ResolveEffectiveTheme" bioc:stroke="#ff9800" bioc:fill="#fff3e0" color:background-color="#fff3e0" color:border-color="#ff9800">
        <dc:Bounds x="110" y="520" width="260" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_TM_ApplyThemeForWidget" bpmnElement="Task_TM_ApplyThemeForWidget" bioc:stroke="#205022" bioc:fill="#e8f5e9" color:background-color="#e8f5e9" color:border-color="#205022">
        <dc:Bounds x="420" y="520" width="260" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_SR_LoadQssFiles" bpmnElement="Task_SR_LoadQssFiles" bioc:stroke="#205022" bioc:fill="#e8f5e9" color:background-color="#e8f5e9" color:border-color="#205022">
        <dc:Bounds x="890" y="650" width="260" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_TM_UpdateHeaderIcons" bpmnElement="Task_TM_UpdateHeaderIcons" bioc:stroke="#2e7d32" bioc:fill="#c8e6c9" color:background-color="#c8e6c9" color:border-color="#2e7d32">
        <dc:Bounds x="1010" y="440" width="260" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_WidgetThemed" bpmnElement="End_WidgetThemed" bioc:stroke="#2e7d32" bioc:fill="#c8e6c9" color:background-color="#c8e6c9" color:border-color="#2e7d32">
        <dc:Bounds x="1052" y="228" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1025" y="191" width="90" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_TM_SelectNewTheme" bpmnElement="Task_TM_SelectNewTheme" bioc:stroke="#ff9800" bioc:fill="#fff3e0" color:background-color="#fff3e0" color:border-color="#ff9800">
        <dc:Bounds x="420" y="370" width="260" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_TM_ApplyNewThemeToMainDialog" bpmnElement="Task_TM_ApplyNewThemeToMainDialog" bioc:stroke="#205022" bioc:fill="#e8f5e9" color:background-color="#e8f5e9" color:border-color="#205022">
        <dc:Bounds x="698" y="440" width="260" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_SR_LoadNewThemeQss" bpmnElement="Task_SR_LoadNewThemeQss" bioc:stroke="#205022" bioc:fill="#e8f5e9" color:background-color="#e8f5e9" color:border-color="#205022">
        <dc:Bounds x="1360" y="730" width="260" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_TM_UpdateHeaderIconsNewTheme" bpmnElement="Task_TM_UpdateHeaderIconsNewTheme" bioc:stroke="#2e7d32" bioc:fill="#c8e6c9" color:background-color="#c8e6c9" color:border-color="#2e7d32">
        <dc:Bounds x="1360" y="530" width="260" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_TM_SaveThemeSetting" bpmnElement="Task_TM_SaveThemeSetting" bioc:stroke="#205022" bioc:fill="#e8f5e9" color:background-color="#e8f5e9" color:border-color="#205022">
        <dc:Bounds x="1360" y="440" width="260" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_MainDialog_RethemeModules" bpmnElement="Task_MainDialog_RethemeModules" bioc:stroke="#205022" bioc:fill="#e8f5e9" color:background-color="#e8f5e9" color:border-color="#205022">
        <dc:Bounds x="1360" y="70" width="320" height="60" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_End_ThemeToggled" bpmnElement="End_ThemeToggled" bioc:stroke="#2e7d32" bioc:fill="#c8e6c9" color:background-color="#c8e6c9" color:border-color="#2e7d32">
        <dc:Bounds x="1612" y="228" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1700" y="219" width="80" height="53" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Task_MainDialog_HandleThemeToggle" bpmnElement="Task_MainDialog_HandleThemeToggle" bioc:stroke="#205022" bioc:fill="#e8f5e9" color:background-color="#e8f5e9" color:border-color="#205022">
        <dc:Bounds x="480" y="220" width="320" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Start_UserClicksThemeToggle" bpmnElement="Start_UserClicksThemeToggle" bioc:stroke="#205022" bioc:fill="#c8e6c9" color:background-color="#c8e6c9" color:border-color="#205022">
        <dc:Bounds x="622" y="102" width="36" height="36" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="542.5" y="100" width="69" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Edge_Association_QssLoading_To_Task_SR_LoadQssFiles" bpmnElement="Association_QssLoading_To_Task_SR_LoadQssFiles">
        <di:waypoint x="780" y="688" />
        <di:waypoint x="890" y="689" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Association_ModuleRetheme_To_Task_MainDialog_RethemeModules" bpmnElement="Association_ModuleRetheme_To_Task_MainDialog_RethemeModules">
        <di:waypoint x="1326" y="50" />
        <di:waypoint x="1374" y="70" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Init_Start_To_CallSetInitialTheme" bpmnElement="Flow_Init_Start_To_CallSetInitialTheme">
        <di:waypoint x="68" y="245" />
        <di:waypoint x="160" y="245" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Init_CallSetInitialTheme_To_TM_ResolveEffectiveTheme" bpmnElement="Flow_Init_CallSetInitialTheme_To_TM_ResolveEffectiveTheme">
        <di:waypoint x="230" y="276" />
        <di:waypoint x="230" y="520" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Init_TM_ResolveEffectiveTheme_To_TM_ApplyThemeForWidget" bpmnElement="Flow_Init_TM_ResolveEffectiveTheme_To_TM_ApplyThemeForWidget">
        <di:waypoint x="370" y="550" />
        <di:waypoint x="420" y="550" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Init_TM_ApplyThemeForWidget_To_SR_LoadQssFiles" bpmnElement="Flow_Init_TM_ApplyThemeForWidget_To_SR_LoadQssFiles">
        <di:waypoint x="610" y="520" />
        <di:waypoint x="610" y="470" />
        <di:waypoint x="698" y="470" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1akomev_di" bpmnElement="Flow_1akomev">
        <di:waypoint x="910" y="500" />
        <di:waypoint x="910" y="650" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Init_SR_LoadQssFiles_To_TM_UpdateHeaderIcons" bpmnElement="Flow_Init_SR_LoadQssFiles_To_TM_UpdateHeaderIcons">
        <di:waypoint x="1070" y="650" />
        <di:waypoint x="1070" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Init_TM_UpdateHeaderIcons_To_End_WidgetThemed" bpmnElement="Flow_Init_TM_UpdateHeaderIcons_To_End_WidgetThemed">
        <di:waypoint x="1070" y="440" />
        <di:waypoint x="1070" y="264" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Toggle_MainDialog_HandleThemeToggle_To_TM_SelectNewTheme" bpmnElement="Flow_Toggle_MainDialog_HandleThemeToggle_To_TM_SelectNewTheme">
        <di:waypoint x="610" y="280" />
        <di:waypoint x="610" y="370" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Toggle_TM_SelectNewTheme_To_TM_ApplyNewThemeToMainDialog" bpmnElement="Flow_Toggle_TM_SelectNewTheme_To_TM_ApplyNewThemeToMainDialog">
        <di:waypoint x="610" y="430" />
        <di:waypoint x="610" y="470" />
        <di:waypoint x="698" y="470" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Toggle_TM_ApplyNewThemeToMainDialog_To_SR_LoadNewThemeQss" bpmnElement="Flow_Toggle_TM_ApplyNewThemeToMainDialog_To_SR_LoadNewThemeQss">
        <di:waypoint x="820" y="500" />
        <di:waypoint x="820" y="760" />
        <di:waypoint x="1360" y="760" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Toggle_SR_LoadNewThemeQss_To_TM_UpdateHeaderIconsNewTheme" bpmnElement="Flow_Toggle_SR_LoadNewThemeQss_To_TM_UpdateHeaderIconsNewTheme">
        <di:waypoint x="1490" y="730" />
        <di:waypoint x="1490" y="590" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Toggle_TM_UpdateHeaderIconsNewTheme_To_TM_SaveThemeSetting" bpmnElement="Flow_Toggle_TM_UpdateHeaderIconsNewTheme_To_TM_SaveThemeSetting">
        <di:waypoint x="1490" y="530" />
        <di:waypoint x="1490" y="500" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Toggle_TM_SaveThemeSetting_To_MainDialog_RethemeModules" bpmnElement="Flow_Toggle_TM_SaveThemeSetting_To_MainDialog_RethemeModules">
        <di:waypoint x="1490" y="440" />
        <di:waypoint x="1490" y="130" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Edge_Flow_Toggle_MainDialog_RethemeModules_To_End_ThemeToggled" bpmnElement="Flow_Toggle_MainDialog_RethemeModules_To_End_ThemeToggled">
        <di:waypoint x="1630" y="130" />
        <di:waypoint x="1630" y="228" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_13v07up_di" bpmnElement="Flow_13v07up">
        <di:waypoint x="640" y="138" />
        <di:waypoint x="640" y="220" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Participant_1t0wopb_di" bpmnElement="Participant_1mzulld" isHorizontal="true">
        <dc:Bounds x="250" y="-180" width="600" height="60" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Annotation_QssLoading" bpmnElement="Annotation_QssLoading">
        <dc:Bounds x="420" y="670" width="360" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Shape_Annotation_ModuleRetheme" bpmnElement="Annotation_ModuleRetheme">
        <dc:Bounds x="990" y="-10" width="380" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0kylnae_di" bpmnElement="Flow_0kylnae">
        <di:waypoint x="640" y="-120" />
        <di:waypoint x="640" y="100" />
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
