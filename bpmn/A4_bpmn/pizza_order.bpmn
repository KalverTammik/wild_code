<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:open-bpmn="http://open-bpmn.org/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" id="Definitions_PizzaOrder" targetNamespace="http://example.com/bpmn/pizza">
  <bpmn:extensionElements>
    <open-bpmn:auto-align/>
  </bpmn:extensionElements>
  <bpmn:process id="PizzaOrderProcess" isExecutable="true" processType="Public">
    <bpmn:laneSet id="LaneSet_Main">
      <bpmn:lane id="Lane_Client" name="Klient">
        <bpmn:flowNodeRef>StartEvent_Order</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>UserTask_PlaceOrder</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>ServiceTask_ShowOrderReceived</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>ServiceTask_ShowOrderInProgress</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>ServiceTask_ShowOrderOutForDelivery</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>ServiceTask_ShowOrderDelivered</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>EndEvent_OrderReceived</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_Restaurant" name="Pizzarestoran">
        <bpmn:flowNodeRef>ServiceTask_ConfirmOrder</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>ExclusiveGateway_CheckInventory</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>ScriptTask_PreparePizza</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>ManualTask_PackPizza</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>SendTask_SendFailureNotice</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_Courier" name="Kuller">
        <bpmn:flowNodeRef>UserTask_DeliverPizza</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>UserTask_ConfirmDelivery</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:startEvent id="StartEvent_Order" name="Tellimuse algus">
      <bpmn:outgoing>Flow_OrderPlaced</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:userTask id="UserTask_PlaceOrder" name="Klient esitab tellimuse">
      <bpmn:incoming>Flow_OrderPlaced</bpmn:incoming>
      <bpmn:outgoing>Flow_ToConfirmation</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:serviceTask id="ServiceTask_ShowOrderReceived" name="Kuva: Tellimus vastu võetud (telefonis)">
      <bpmn:incoming>Flow_ToConfirmation</bpmn:incoming>
      <bpmn:outgoing>Flow_ShowOrderInProgress</bpmn:outgoing>
      <bpmn:documentation>Tellimuse esitamise järel kuvatakse kliendi rakenduses teade, et tellimus on vastu võetud.</bpmn:documentation>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="ServiceTask_ShowOrderInProgress" name="Kuva: Tellimus töös (telefonis)">
      <bpmn:incoming>Flow_ShowOrderInProgress</bpmn:incoming>
      <bpmn:outgoing>Flow_ShowOrderOutForDelivery</bpmn:outgoing>
      <bpmn:documentation>Kui restoran alustab pitsa valmistamist, kuvatakse kliendi rakenduses teade, et tellimus on töös.</bpmn:documentation>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="ServiceTask_ShowOrderOutForDelivery" name="Kuva: Tellimus teel (telefonis)">
      <bpmn:incoming>Flow_ShowOrderOutForDelivery</bpmn:incoming>
      <bpmn:outgoing>Flow_ShowOrderDelivered</bpmn:outgoing>
      <bpmn:documentation>Kui kuller võtab pitsa kaasa, kuvatakse kliendi rakenduses teade, et tellimus on teel.</bpmn:documentation>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="ServiceTask_ShowOrderDelivered" name="Kuva: Tellimus kohal (telefonis)">
      <bpmn:incoming>Flow_ShowOrderDelivered</bpmn:incoming>
      <bpmn:outgoing>Flow_ToEnd</bpmn:outgoing>
      <bpmn:documentation>Kui klient kinnitab kättesaamise, kuvatakse rakenduses teade, et tellimus on kohal.</bpmn:documentation>
    </bpmn:serviceTask>
    <bpmn:serviceTask id="ServiceTask_ConfirmOrder" name="Restoran kinnitab tellimuse">
      <bpmn:incoming>Flow_ToConfirmation</bpmn:incoming>
      <bpmn:outgoing>Flow_ToInventoryCheck</bpmn:outgoing>
    </bpmn:serviceTask>
    <bpmn:exclusiveGateway id="ExclusiveGateway_CheckInventory" name="Varude kontroll">
      <bpmn:incoming>Flow_ToInventoryCheck</bpmn:incoming>
      <bpmn:outgoing>Flow_InventoryOk</bpmn:outgoing>
      <bpmn:outgoing>Flow_InventoryFail</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:scriptTask id="ScriptTask_PreparePizza" name="Pitsa valmistamine">
      <bpmn:incoming>Flow_InventoryOk</bpmn:incoming>
      <bpmn:outgoing>Flow_ToPacking</bpmn:outgoing>
    </bpmn:scriptTask>
    <bpmn:manualTask id="ManualTask_PackPizza" name="Pitsa pakkimine">
      <bpmn:incoming>Flow_ToPacking</bpmn:incoming>
      <bpmn:outgoing>Flow_ToCourier</bpmn:outgoing>
    </bpmn:manualTask>
    <bpmn:userTask id="UserTask_DeliverPizza" name="Kuller toimetab pitsa kohale">
      <bpmn:incoming>Flow_ToCourier</bpmn:incoming>
      <bpmn:outgoing>Flow_ShowOrderOutForDelivery</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="UserTask_ConfirmDelivery" name="Klient kinnitab kättesaamise">
      <bpmn:incoming>Flow_ShowOrderDelivered</bpmn:incoming>
      <bpmn:outgoing>Flow_ToEnd</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:sendTask id="SendTask_SendFailureNotice" name="Saada kliendile teade: varusid pole">
      <bpmn:incoming>Flow_InventoryFail</bpmn:incoming>
      <bpmn:outgoing>Flow_ToEnd</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:endEvent id="EndEvent_OrderReceived" name="Tellimus lõppenud">
      <bpmn:incoming>Flow_ToEnd</bpmn:incoming>
    </bpmn:endEvent>
    <!-- Flows -->
    <bpmn:sequenceFlow id="Flow_OrderPlaced" name="Tellimus esitatud" sourceRef="StartEvent_Order" targetRef="UserTask_PlaceOrder"/>
    <bpmn:sequenceFlow id="Flow_ToConfirmation" name="Saada restoranile" sourceRef="UserTask_PlaceOrder" targetRef="ServiceTask_ConfirmOrder"/>
    <bpmn:sequenceFlow id="Flow_ToConfirmation" name="Kuva tellimus vastu võetud" sourceRef="UserTask_PlaceOrder" targetRef="ServiceTask_ShowOrderReceived"/>
    <bpmn:sequenceFlow id="Flow_ShowOrderInProgress" name="Kuva tellimus töös" sourceRef="ServiceTask_ShowOrderReceived" targetRef="ServiceTask_ShowOrderInProgress"/>
    <bpmn:sequenceFlow id="Flow_ShowOrderOutForDelivery" name="Kuva tellimus teel" sourceRef="ServiceTask_ShowOrderInProgress" targetRef="ServiceTask_ShowOrderOutForDelivery"/>
    <bpmn:sequenceFlow id="Flow_ShowOrderDelivered" name="Kuva tellimus kohal" sourceRef="ServiceTask_ShowOrderOutForDelivery" targetRef="ServiceTask_ShowOrderDelivered"/>
    <bpmn:sequenceFlow id="Flow_ShowOrderDelivered" name="Kliendi kinnitus kohaletoimetamise kohta" sourceRef="UserTask_ConfirmDelivery" targetRef="ServiceTask_ShowOrderDelivered"/>
    <bpmn:sequenceFlow id="Flow_ToInventoryCheck" name="Varude kontroll" sourceRef="ServiceTask_ConfirmOrder" targetRef="ExclusiveGateway_CheckInventory"/>
    <bpmn:sequenceFlow id="Flow_InventoryOk" name="Varud olemas" sourceRef="ExclusiveGateway_CheckInventory" targetRef="ScriptTask_PreparePizza"/>
    <bpmn:sequenceFlow id="Flow_InventoryFail" name="Varud puuduvad" sourceRef="ExclusiveGateway_CheckInventory" targetRef="SendTask_SendFailureNotice"/>
    <bpmn:sequenceFlow id="Flow_ToPacking" name="Valmis pakkimiseks" sourceRef="ScriptTask_PreparePizza" targetRef="ManualTask_PackPizza"/>
    <bpmn:sequenceFlow id="Flow_ToCourier" name="Anna kullerile" sourceRef="ManualTask_PackPizza" targetRef="UserTask_DeliverPizza"/>
    <bpmn:sequenceFlow id="Flow_ToDeliveryConfirm" name="Kohaletoimetatud" sourceRef="UserTask_DeliverPizza" targetRef="UserTask_ConfirmDelivery"/>
    <bpmn:sequenceFlow id="Flow_ToEnd" name="Tellimus lõpetatud" sourceRef="UserTask_ConfirmDelivery" targetRef="EndEvent_OrderReceived"/>
    <bpmn:sequenceFlow id="Flow_ToEnd_Fail" name="Tellimus tühistatud" sourceRef="SendTask_SendFailureNotice" targetRef="EndEvent_OrderReceived"/>
    <bpmn:documentation id="documentation_i0h4UQ"/>
  </bpmn:process>
  <bpmndi:BPMNDiagram id="BPMNDiagram_PizzaOrder">
    <bpmndi:BPMNPlane bpmnElement="PizzaOrderProcess" id="BPMNPlane_PizzaOrder">
      <!-- Client Lane -->
      <bpmndi:BPMNShape bpmnElement="StartEvent_Order" id="Shape_StartEvent_Order">
        <dc:Bounds height="36" width="36" x="100" y="100"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="UserTask_PlaceOrder" id="Shape_UserTask_PlaceOrder">
        <dc:Bounds height="60" width="120" x="200" y="90"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="ServiceTask_ShowOrderReceived" id="Shape_ServiceTask_ShowOrderReceived">
        <dc:Bounds height="60" width="120" x="340" y="90"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="ServiceTask_ShowOrderInProgress" id="Shape_ServiceTask_ShowOrderInProgress">
        <dc:Bounds height="60" width="120" x="480" y="90"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="ServiceTask_ShowOrderOutForDelivery" id="Shape_ServiceTask_ShowOrderOutForDelivery">
        <dc:Bounds height="60" width="120" x="620" y="90"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="ServiceTask_ShowOrderDelivered" id="Shape_ServiceTask_ShowOrderDelivered">
        <dc:Bounds height="60" width="120" x="760" y="90"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="EndEvent_OrderReceived" id="Shape_EndEvent_OrderReceived">
        <dc:Bounds height="36" width="36" x="1100" y="100"/>
      </bpmndi:BPMNShape>
      <!-- Restaurant Lane -->
      <bpmndi:BPMNShape bpmnElement="ServiceTask_ConfirmOrder" id="Shape_ServiceTask_ConfirmOrder">
        <dc:Bounds height="60" width="140" x="370" y="90"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="ExclusiveGateway_CheckInventory" id="Shape_ExclusiveGateway_CheckInventory" isMarkerVisible="true">
        <dc:Bounds height="50" width="50" x="560" y="95"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="ScriptTask_PreparePizza" id="Shape_ScriptTask_PreparePizza">
        <dc:Bounds height="60" width="140" x="670" y="90"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="ManualTask_PackPizza" id="Shape_ManualTask_PackPizza">
        <dc:Bounds height="60" width="140" x="870" y="90"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="SendTask_SendFailureNotice" id="Shape_SendTask_SendFailureNotice">
        <dc:Bounds height="60" width="160" x="670" y="200"/>
      </bpmndi:BPMNShape>
      <!-- Courier Lane -->
      <bpmndi:BPMNShape bpmnElement="UserTask_DeliverPizza" id="Shape_UserTask_DeliverPizza">
        <dc:Bounds height="60" width="140" x="1060" y="90"/>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape bpmnElement="UserTask_ConfirmDelivery" id="Shape_UserTask_ConfirmDelivery">
        <dc:Bounds height="60" width="160" x="1280" y="90"/>
      </bpmndi:BPMNShape>
      <!-- Edges -->
      <bpmndi:BPMNEdge bpmnElement="Flow_OrderPlaced" id="Edge_Flow_OrderPlaced">
        <di:waypoint x="136" y="118"/>
        <di:waypoint x="200" y="118"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="Flow_ToConfirmation" id="Edge_Flow_ToConfirmation_Client">
        <di:waypoint x="320" y="118"/>
        <di:waypoint x="340" y="118"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="Flow_ShowOrderInProgress" id="Edge_Flow_ShowOrderInProgress">
        <di:waypoint x="460" y="118"/>
        <di:waypoint x="480" y="118"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="Flow_ShowOrderOutForDelivery" id="Edge_Flow_ShowOrderOutForDelivery">
        <di:waypoint x="600" y="118"/>
        <di:waypoint x="620" y="118"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="Flow_ShowOrderDelivered" id="Edge_Flow_ShowOrderDelivered">
        <di:waypoint x="740" y="118"/>
        <di:waypoint x="760" y="118"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="Flow_ShowOrderDelivered" id="Edge_Flow_ShowOrderDelivered_Confirm">
        <di:waypoint x="920" y="118"/>
        <di:waypoint x="760" y="118"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="Flow_ToConfirmation" id="Edge_Flow_ToConfirmation">
        <di:waypoint x="320" y="118"/>
        <di:waypoint x="370" y="118"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="Flow_ToInventoryCheck" id="Edge_Flow_ToInventoryCheck">
        <di:waypoint x="510" y="118"/>
        <di:waypoint x="560" y="120"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="Flow_InventoryOk" id="Edge_Flow_InventoryOk">
        <di:waypoint x="610" y="120"/>
        <di:waypoint x="670" y="120"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="Flow_InventoryFail" id="Edge_Flow_InventoryFail">
        <di:waypoint x="585" y="145"/>
        <di:waypoint x="750" y="200"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="Flow_ToPacking" id="Edge_Flow_ToPacking">
        <di:waypoint x="810" y="120"/>
        <di:waypoint x="870" y="120"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="Flow_ToCourier" id="Edge_Flow_ToCourier">
        <di:waypoint x="1010" y="120"/>
        <di:waypoint x="1060" y="120"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="Flow_ToDeliveryConfirm" id="Edge_Flow_ToDeliveryConfirm">
        <di:waypoint x="1200" y="120"/>
        <di:waypoint x="1280" y="120"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="Flow_ToEnd" id="Edge_Flow_ToEnd">
        <di:waypoint x="1440" y="120"/>
        <di:waypoint x="1136" y="118"/>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge bpmnElement="Flow_ToEnd_Fail" id="Edge_Flow_ToEnd_Fail">
        <di:waypoint x="830" y="230"/>
        <di:waypoint x="1136" y="118"/>
      </bpmndi:BPMNEdge>
    </bpmndi:BPMNPlane>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
